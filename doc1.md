## Spring AI å®æˆ˜æŒ‡å—ï¼šSpring AI å¿«é€Ÿå…¥é—¨

### 1.1 Spring AI çš„å®šä½ä¸ç”Ÿæ€ä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆé€‰æ‹©å®ƒï¼Ÿ

åœ¨å½“ä»Šè¿™ä¸ª AI æµªæ½®æ±¹æ¶Œçš„æ—¶ä»£ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å·²ç»ä¸å†æ˜¯é¥ä¸å¯åŠçš„é»‘ç§‘æŠ€ï¼Œè€Œæ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­å¯ä»¥è§¦åŠçš„å¼ºå¤§å·¥å…·ã€‚ç„¶è€Œï¼Œå¦‚ä½•å°†è¿™äº›å¤æ‚çš„ AI èƒ½åŠ›ä¼˜é›…åœ°é›†æˆåˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„ Java åº”ç”¨ä¸­ï¼Œä¸€ç›´æ˜¯è®¸å¤šå¼€å‘è€…é¢ä¸´çš„æŒ‘æˆ˜ã€‚

è¿™æ—¶ï¼ŒSpring AI åº”è¿è€Œç”Ÿã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„ SDKï¼Œæ›´æ˜¯ä¸€ä¸ªåŸºäº Spring æ¡†æ¶ç†å¿µæ„å»ºçš„ AI åº”ç”¨å¼€å‘æ¡†æ¶ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š**è®© Java å¼€å‘è€…èƒ½å¤Ÿä»¥ Spring çš„æ–¹å¼ï¼Œè½»æ¾ã€é«˜æ•ˆåœ°æ„å»º AI é©±åŠ¨çš„åº”ç”¨ã€‚**

**Spring AI çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š**

1.  **Spring ç”Ÿæ€çš„æ— ç¼é›†æˆï¼š** å¦‚æœä½ ç†Ÿæ‚‰ Spring Bootã€Spring Dataã€Spring Web ç­‰ï¼Œé‚£ä¹ˆä½ å‡ ä¹å¯ä»¥é›¶æˆæœ¬åœ°å­¦ä¹ å’Œä½¿ç”¨ Spring AIã€‚å®ƒæ²¿ç”¨äº† Spring å®¶æ—ä¸€è´¯çš„"çº¦å®šä¼˜äºé…ç½®"å’Œ"å¼€ç®±å³ç”¨"çš„ç‰¹æ€§ï¼Œå¤§å¤§é™ä½äº†å­¦ä¹ æ›²çº¿ã€‚
2.  **æŠ½è±¡ä¸ç»Ÿä¸€çš„ APIï¼š** æ— è®ºæ˜¯ OpenAIã€DeepSeekã€Hugging Face è¿˜æ˜¯ Azure OpenAIï¼ŒSpring AI éƒ½æä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„ API æ¥å£ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä¸ä¿®æ”¹æ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œè½»æ¾åˆ‡æ¢ä¸åŒçš„ AI æ¨¡å‹æä¾›å•†ï¼Œè¿™å¯¹äºæ¨¡å‹çš„é€‰æ‹©å’Œæœªæ¥çš„æ‰©å±•æ€§è‡³å…³é‡è¦ã€‚
3.  **ä¼ä¸šçº§ç‰¹æ€§æ”¯æŒï¼š** ä½œä¸º Spring å®¶æ—çš„ä¸€å‘˜ï¼ŒSpring AI è‡ªç„¶ç»§æ‰¿äº† Spring Boot åœ¨å¯è§‚æµ‹æ€§ï¼ˆMetrics, Tracingï¼‰ã€é…ç½®ç®¡ç†ã€å®‰å…¨æ€§ç­‰æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ï¼Œä½¿å¾—æ„å»ºç”Ÿäº§çº§åˆ«çš„ AI åº”ç”¨å˜å¾—æ›´åŠ å¯é ã€‚
4.  **æ¨¡å—åŒ–ä¸å¯æ‰©å±•æ€§ï¼š** Spring AI è®¾è®¡ç²¾å·§ï¼Œå„ä¸ªåŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ Chat Client, Embedding, Tool Calling, RAGï¼‰éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä½ å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©æ€§åœ°å¼•å…¥å’Œä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾æ‰©å±•è‡ªå®šä¹‰åŠŸèƒ½ã€‚

ç®€è€Œè¨€ä¹‹ï¼ŒSpring AI å°±åƒæ˜¯ Spring æ¡†æ¶ä¸º AI é¢†åŸŸé‡èº«å®šåˆ¶çš„ä¸€æŠŠç‘å£«å†›åˆ€ï¼Œå®ƒè®© AI èƒ½åŠ›ä¸å†æ˜¯å­¤ç«‹çš„é»‘ç®±ï¼Œè€Œæ˜¯å¯ä»¥ä¸ä½ çš„ä¸šåŠ¡é€»è¾‘ç´§å¯†ç»“åˆçš„å¼ºå¤§ç»„ä»¶ã€‚

### 1.2 å¯¹æ¯” LangChain ç­‰æ¡†æ¶çš„å·®å¼‚

åœ¨ AI åº”ç”¨å¼€å‘é¢†åŸŸï¼Œé™¤äº† Spring AIï¼Œä½ å¯èƒ½è¿˜å¬è¯´è¿‡ LangChainã€‚LangChain æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„æ¡†æ¶ï¼Œå®ƒæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆPython, JavaScript/TypeScriptï¼‰ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…æ„å»ºå¤æ‚çš„ LLM åº”ç”¨ã€‚é‚£ä¹ˆï¼ŒSpring AI å’Œ LangChain æœ‰ä½•ä¸åŒå‘¢ï¼Ÿ

| ç‰¹æ€§/æ¡†æ¶     | Spring AI                                      | LangChain                                      |
| :------------ | :--------------------------------------------- | :--------------------------------------------- |
| **ä¸»è¦è¯­è¨€**  | Java                                           | Python, JavaScript/TypeScript                  |
| **ç”Ÿæ€é›†æˆ**  | æ·±åº¦é›†æˆ Spring ç”Ÿæ€ï¼Œå¦‚ Spring Boot, Spring Data | ç‹¬ç«‹ç”Ÿæ€ï¼Œä½†æä¾›ä¸å„ç§å·¥å…·çš„é›†æˆ               |
| **è®¾è®¡ç†å¿µ**  | Spring é£æ ¼ï¼Œå¼ºè°ƒçº¦å®šã€ä¾èµ–æ³¨å…¥ã€æ¨¡å—åŒ–          | é“¾å¼è°ƒç”¨ã€ä»£ç†æ¨¡å¼ï¼Œå¼ºè°ƒç»„ä»¶ç»„åˆ               |
| **ç›®æ ‡ç”¨æˆ·**  | Java å¼€å‘è€…ï¼Œå°¤å…¶æ˜¯ Spring å¼€å‘è€…              | è·¨è¯­è¨€å¼€å‘è€…ï¼ŒAI/ML å·¥ç¨‹å¸ˆ                     |
| **ç”Ÿäº§å°±ç»ª**  | ç»§æ‰¿ Spring Boot çš„ä¼ä¸šçº§ç‰¹æ€§ï¼Œç”Ÿäº§éƒ¨ç½²å‹å¥½    | ç¤¾åŒºæ´»è·ƒï¼Œä½†ç”Ÿäº§éƒ¨ç½²éœ€é¢å¤–è€ƒè™‘ Java ç”Ÿæ€é›†æˆ   |
| **æŠ½è±¡å±‚æ¬¡**  | æä¾›é«˜å±‚æŠ½è±¡ï¼ŒåŒæ—¶ä¿ç•™åº•å±‚æ¨¡å‹é…ç½®çš„çµæ´»æ€§     | æä¾›æ›´ç»†ç²’åº¦çš„ç»„ä»¶ï¼Œå…è®¸é«˜åº¦å®šåˆ¶åŒ–             |

**æ€»ç»“æ¥è¯´ï¼š**

*   å¦‚æœä½ æ˜¯ **Java å¼€å‘è€…**ï¼Œå¹¶ä¸”ä½ çš„é¡¹ç›®å·²ç»åŸºäº **Spring æ¡†æ¶**ï¼Œé‚£ä¹ˆ Spring AI æ— ç–‘æ˜¯ä½ çš„é¦–é€‰ã€‚å®ƒèƒ½è®©ä½ åœ¨ç†Ÿæ‚‰çš„å¼€å‘ç¯å¢ƒä¸­ï¼Œä»¥æœ€å¹³æ»‘çš„æ–¹å¼æ¥å…¥ AI èƒ½åŠ›ï¼Œäº«å— Spring ç”Ÿæ€å¸¦æ¥çš„æ‰€æœ‰ä¾¿åˆ©ã€‚
*   å¦‚æœä½ æ˜¯ **Python å¼€å‘è€…**ï¼Œæˆ–è€…éœ€è¦æ„å»ºä¸€ä¸ªä¸ç‰¹å®šè¯­è¨€ç”Ÿæ€æ— å…³çš„ã€é«˜åº¦å®šåˆ¶åŒ–çš„ AI åº”ç”¨ï¼Œé‚£ä¹ˆ LangChain å¯èƒ½ä¼šæ›´é€‚åˆä½ ã€‚

Spring AI å¹¶ä¸æ˜¯è¦å–ä»£ LangChainï¼Œè€Œæ˜¯ä¸º Java å¼€å‘è€…æä¾›äº†ä¸€ä¸ªæ›´ç¬¦åˆå…¶æŠ€æœ¯æ ˆå’Œå¼€å‘ä¹ æƒ¯çš„å¼ºå¤§é€‰æ‹©ã€‚

### 1.3 äº”åˆ†é’Ÿæ­å»ºç¬¬ä¸€ä¸ª ChatClientï¼ˆé›†æˆ DeepSeekï¼‰

ç†è®ºè®²å¾—å†å¤šï¼Œä¸å¦‚åŠ¨æ‰‹å®è·µæ¥å¾—å®åœ¨ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸€èµ·ç”¨ 5 åˆ†é’Ÿï¼Œæ­å»ºä½ çš„ç¬¬ä¸€ä¸ª Spring AI åº”ç”¨ï¼Œå¹¶ä¸ DeepSeek æ¨¡å‹è¿›è¡Œå¯¹è¯ã€‚

**å‰ææ¡ä»¶ï¼š**

*   JDK 21 æˆ–æ›´é«˜ç‰ˆæœ¬
*   Maven 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
*   ä¸€ä¸ª DeepSeek API Key (å¦‚æœä½ æ²¡æœ‰ï¼Œå¯ä»¥å» DeepSeek å®˜ç½‘æ³¨å†Œå¹¶è·å–)

#### æ­¥éª¤ 1ï¼šåˆ›å»º Spring Boot é¡¹ç›®å¹¶é…ç½® Maven ä¾èµ–

ä½ å¯ä»¥ä½¿ç”¨ Spring Initializr (start.spring.io) æ¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ª Spring Boot é¡¹ç›®ã€‚

é€‰æ‹©ä»¥ä¸‹ä¾èµ–ï¼š

*   **Spring Web** (ç”¨äºæ„å»º RESTful åº”ç”¨ï¼Œè™½ç„¶æˆ‘ä»¬è¿™é‡Œåªæ˜¯ç®€å•ç¤ºä¾‹ï¼Œä½†é€šå¸¸ä¼šç”¨åˆ°)

ä¸‹è½½é¡¹ç›®å¹¶è§£å‹ã€‚

** ä¿®æ”¹ `pom.xml`ï¼Œè¯·ç¡®ä¿ä½ çš„ `pom.xml` æ–‡ä»¶åŒ…å«ä»¥ä¸‹æ ¸å¿ƒä¾èµ–ï¼š**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-parent</artifactId>
		<version>3.4.7</version>
		<relativePath/> <!-- lookup parent from repository -->
	</parent>
	<groupId>com.example</groupId>
	<artifactId>simple-chat-client</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<name>simple-chat-client</name>
	<description>simple-chat-client</description>
	<properties>
		<java.version>21</java.version>
		<spring-ai.version>1.0.0</spring-ai.version>
	</properties>
	<dependencies>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-web</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework.ai</groupId>
			<artifactId>spring-ai-starter-model-deepseek</artifactId>
		</dependency>

		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-test</artifactId>
			<scope>test</scope>
		</dependency>
	</dependencies>
	<dependencyManagement>
		<dependencies>
			<dependency>
				<groupId>org.springframework.ai</groupId>
				<artifactId>spring-ai-bom</artifactId>
				<version>${spring-ai.version}</version>
				<type>pom</type>
				<scope>import</scope>
			</dependency>
		</dependencies>
	</dependencyManagement>

	<build>
		<plugins>
			<plugin>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-maven-plugin</artifactId>
			</plugin>
		</plugins>
	</build>

</project>
```

**é‡è¦è¯´æ˜ï¼š**

*   **`spring-boot-starter-parent` ç‰ˆæœ¬ï¼š** è¯·ç¡®ä¿ä½ çš„ Spring Boot ç‰ˆæœ¬æ˜¯æœ€æ–°çš„ç¨³å®šç‰ˆã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œ`3.4.7` æ˜¯ä¸€ä¸ªè¾ƒæ–°çš„ç‰ˆæœ¬ã€‚
*   **`spring-ai.version`ï¼š** Spring AI çš„ç‰ˆæœ¬å·éå¸¸é‡è¦ã€‚è¯·è®¿é—® Spring AI çš„å®˜æ–¹æ–‡æ¡£æˆ– GitHub ä»“åº“ï¼ŒæŸ¥æ‰¾æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œ`1.0.0` æ˜¯ä¸€ä¸ªå¯ç”¨çš„ç‰ˆæœ¬ã€‚
*   **`spring-ai-bom`ï¼š** å¼•å…¥ `spring-ai-bom` (Bill Of Materials) æ˜¯ä¸€ä¸ªæœ€ä½³å®è·µã€‚å®ƒå…è®¸ä½ ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ Spring AI ç›¸å…³ä¾èµ–çš„ç‰ˆæœ¬ï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚ä¸€æ—¦å¼•å…¥äº† BOMï¼Œä½ å°±ä¸éœ€è¦åœ¨ `spring-ai-starter-model-deepseek` ç­‰å…·ä½“æ¨¡å—ä¸­æŒ‡å®šç‰ˆæœ¬å·äº†ã€‚
*   **Java ç‰ˆæœ¬ï¼š** Spring AI 1.0.0 è¦æ±‚ Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œè¿™æ˜¯ä¸ºäº†åˆ©ç”¨æœ€æ–°çš„ Java ç‰¹æ€§ã€‚

å®Œæˆ `pom.xml` é…ç½®åï¼Œä¿å­˜æ–‡ä»¶ï¼ŒMaven ä¼šè‡ªåŠ¨ä¸‹è½½æ‰€éœ€çš„ä¾èµ–ã€‚

#### æ­¥éª¤ 2ï¼šé…ç½® DeepSeek API Key

åœ¨ `src/main/resources/application.properties` æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä½ çš„ DeepSeek API Keyï¼š

```properties
spring.application.name=simple-chat-client

# DeepSeek
spring.ai.deepseek.api-key=${DEEPSEEK_API_KEY}
spring.ai.deepseek.chat.options.model=deepseek-chat
spring.ai.deepseek.chat.options.temperature=0.7
```

è¯·å°† `DEEPSEEK_API_KEY` æ›¿æ¢ä¸ºä½ çš„å®é™… API Keyã€‚
**æ³¨æ„ï¼š** åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒAPI Key åº”è¯¥é€šè¿‡ç¯å¢ƒå˜é‡æˆ–æ›´å®‰å…¨çš„é…ç½®æ–¹å¼ç®¡ç†ï¼Œè€Œä¸æ˜¯ç›´æ¥ç¡¬ç¼–ç åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚

#### æ­¥éª¤ 3ï¼šç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª ChatClient

åˆ›å»ºä¸€ä¸ªæ–°çš„ Java ç±»ï¼Œä¾‹å¦‚ `com.example.chatclient.controller.ChatController`ï¼š

```java
package com.example.chatclient.controller;

import org.springframework.ai.chat.client.ChatClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class ChatController {

    @GetMapping("/ok")
    public String ok() {
        return "OK";
    }

    private final ChatClient chatClient;

    // Spring AI ä¼šè‡ªåŠ¨æ³¨å…¥é…ç½®å¥½çš„ ChatClient
    public ChatController(ChatClient.Builder chatClientBuilder) {
        this.chatClient = chatClientBuilder.build();
    }

    @GetMapping("/chat")
    public String chat(@RequestParam(value = "message", defaultValue = "ä½ å¥½ï¼ŒSpring AIï¼") String message) {
        // ä½¿ç”¨ ChatClient å‘é€æ¶ˆæ¯å¹¶è·å–å›å¤
        String response = chatClient.prompt()
                .user(message) // è®¾ç½®ç”¨æˆ·è¾“å…¥
                .call()        // è°ƒç”¨ AI æ¨¡å‹
                .content();    // è·å–å›å¤å†…å®¹
        return response;
    }
}
```

**ä»£ç è§£æï¼š**

*   `@RestController`ï¼šæ ‡å‡†çš„ Spring Web æ³¨è§£ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª RESTful æ§åˆ¶å™¨ã€‚
*   `ChatClient chatClient;`ï¼šè¿™æ˜¯ Spring AI æä¾›çš„æ ¸å¿ƒæ¥å£ï¼Œç”¨äºä¸ AI æ¨¡å‹è¿›è¡Œäº¤äº’ã€‚
*   `public ChatController(ChatClient.Builder chatClientBuilder)`ï¼šSpring AI ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ª `ChatClient.Builder` å®ä¾‹ã€‚æˆ‘ä»¬é€šè¿‡ `builder.build()` æ¥æ„å»º `ChatClient` å®ä¾‹ã€‚
*   `chatClient.prompt().user(message).call().content();`ï¼šè¿™æ˜¯ä¸ AI æ¨¡å‹å¯¹è¯çš„æ ¸å¿ƒé“¾å¼è°ƒç”¨ã€‚
    *   `prompt()`ï¼šå¼€å§‹æ„å»ºä¸€ä¸ª Promptã€‚
    *   `user(message)`ï¼šè®¾ç½®ç”¨æˆ·å‘é€çš„æ¶ˆæ¯å†…å®¹ã€‚
    *   `call()`ï¼šæ‰§è¡Œ AI æ¨¡å‹è°ƒç”¨ã€‚
    *   `content()`ï¼šè·å– AI æ¨¡å‹è¿”å›çš„æ–‡æœ¬å†…å®¹ã€‚

#### æ­¥éª¤ 4ï¼šåˆ›å»ºå¯åŠ¨è„šæœ¬ï¼ˆå¯é€‰ä½†æ¨èï¼‰

ä¸ºäº†æ›´æ–¹ä¾¿åœ°ç®¡ç†ç¯å¢ƒå˜é‡å’Œå¯åŠ¨åº”ç”¨ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯åŠ¨è„šæœ¬ `run.sh`ï¼š

```bash
#!/bin/bash

# Simple Chat Client å¯åŠ¨è„šæœ¬
echo "ğŸš€ æ­£åœ¨å¯åŠ¨ Simple Chat Client..."

# æ£€æŸ¥å¹¶åŠ è½½ .env æ–‡ä»¶
if [ -f ".env" ]; then
    echo "ğŸ“„ æ­£åœ¨åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡..."
    # è¯»å– .env æ–‡ä»¶å¹¶è®¾ç½®ç¯å¢ƒå˜é‡
    while IFS= read -r line; do
        # è·³è¿‡æ³¨é‡Šè¡Œå’Œç©ºè¡Œ
        if [[ ! "$line" =~ ^[[:space:]]*# ]] && [[ -n "$line" ]]; then
            export "$line"
        fi
    done < .env
    echo "âœ… ç¯å¢ƒå˜é‡åŠ è½½å®Œæˆ"
else
    echo "âš ï¸  è­¦å‘Šï¼šæœªæ‰¾åˆ° .env æ–‡ä»¶ï¼Œå°†ä½¿ç”¨é»˜è®¤ç¯å¢ƒå˜é‡"
fi

# æ£€æŸ¥æ˜¯å¦å­˜åœ¨ pom.xml æ–‡ä»¶
if [ ! -f "pom.xml" ]; then
    echo "âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ° pom.xml æ–‡ä»¶ï¼Œè¯·ç¡®ä¿åœ¨æ­£ç¡®çš„é¡¹ç›®ç›®å½•ä¸­è¿è¡Œæ­¤è„šæœ¬"
    exit 1
fi

# å¯åŠ¨ Spring Boot åº”ç”¨
echo "ğŸ”§ ä½¿ç”¨ Maven å¯åŠ¨åº”ç”¨..."
mvn spring-boot:run

# å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
if [ $? -ne 0 ]; then
    echo "âŒ åº”ç”¨å¯åŠ¨å¤±è´¥"
    exit 1
fi
```

åŒæ—¶åˆ›å»ºä¸€ä¸ª `.env` æ–‡ä»¶æ¥å­˜å‚¨ç¯å¢ƒå˜é‡ï¼š

```bash
# DeepSeek API é…ç½®
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# å…¶ä»–ç¯å¢ƒå˜é‡å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ 
# SPRING_PROFILES_ACTIVE=dev
# SERVER_PORT=8080
```

#### æ­¥éª¤ 5ï¼šè¿è¡Œä½ çš„åº”ç”¨

åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œ Spring Boot åº”ç”¨ï¼š

**ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰ï¼š**
```bash
chmod +x run.sh
./run.sh
```

**æˆ–è€…ç›´æ¥ä½¿ç”¨ Mavenï¼š**
```bash
mvn spring-boot:run
```

æˆ–è€…ä½¿ç”¨ä½ çš„ IDE è¿è¡Œ `SimpleChatClientApplication` ç±»ã€‚

#### æ­¥éª¤ 6ï¼šæµ‹è¯•ä½ çš„ AI åº”ç”¨

åº”ç”¨å¯åŠ¨åï¼Œæ‰“å¼€æµè§ˆå™¨æˆ–ä½¿ç”¨ Postman/curl è®¿é—®ä»¥ä¸‹ URLï¼š

```
http://localhost:8080/chat?message=è¯·ç”¨ä¸€å¥è¯ä»‹ç»ä¸€ä¸‹Springæ¡†æ¶
```

ä½ å°†çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å›å¤ï¼ˆå…·ä½“å†…å®¹å¯èƒ½å› æ¨¡å‹è€Œå¼‚ï¼‰ï¼š

```
Springæ¡†æ¶æ˜¯ä¸€ä¸ªå¼€æºçš„Javaå¹³å°ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå…¨é¢çš„ç¼–ç¨‹å’Œé…ç½®æ¨¡å‹ï¼Œç”¨äºæ„å»ºç°ä»£ä¼ä¸šçº§åº”ç”¨ç¨‹åºã€‚
```

æ­å–œä½ ï¼ä½ å·²ç»æˆåŠŸæ­å»ºå¹¶è¿è¡Œäº†ä½ çš„ç¬¬ä¸€ä¸ª Spring AI åº”ç”¨ï¼Œå¹¶ä¸ DeepSeek æ¨¡å‹è¿›è¡Œäº†å¯¹è¯ã€‚æ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Ÿ

### 1.4 ä»£ç ç¤ºä¾‹ï¼š`@Bean` é…ç½® ChatClient çš„åŸºç¡€æ¨¡æ¿

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ `ChatClient.Builder` æ¥æ„å»º `ChatClient`ã€‚åœ¨æ›´å¤æ‚çš„åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½å¸Œæœ›é€šè¿‡ `@Bean` çš„æ–¹å¼æ¥é›†ä¸­é…ç½®å’Œç®¡ç† `ChatClient` å®ä¾‹ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ä¸€äº›å…¨å±€è¡Œä¸ºæˆ–è€…æ³¨å…¥ç‰¹å®šçš„æ‹¦æˆªå™¨ã€‚

ä½ å¯ä»¥åœ¨ä½ çš„ Spring Boot åº”ç”¨ä¸»ç±»æˆ–è€…ä»»ä½• `@Configuration` ç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ª `@Bean` æ–¹æ³•æ¥åˆ›å»º `ChatClient`ï¼š

```java
package com.example.chatclient;

import org.springframework.ai.chat.client.ChatClient;
import org.springframework.ai.chat.model.ChatModel;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {

    // å‡è®¾ä½ å·²ç»é…ç½®äº† ChatModelï¼ŒSpring AI ä¼šè‡ªåŠ¨ä¸ºä½ æ³¨å…¥
    // ä¾‹å¦‚ï¼Œå¦‚æœä½ å¼•å…¥äº† spring-ai-starter-model-deepseek ä¾èµ–ï¼Œå®ƒä¼šè‡ªåŠ¨é…ç½® DeepSeek ChatModel
    @Bean
    public ChatClient customChatClient(ChatModel chatModel) {
        return ChatClient.builder(chatModel)
                // ä½ å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ›´å¤šè‡ªå®šä¹‰é…ç½®ï¼Œä¾‹å¦‚ï¼š
                // .defaultSystem("ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„AIåŠ©æ‰‹ã€‚")
                // .defaultOptions(DeepSeekChatOptions.builder().withTemperature(0.7f).build())
                .build();
    }
}
```

ç„¶åï¼Œåœ¨ä½ çš„ `ChatController` ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥æ³¨å…¥è¿™ä¸ªè‡ªå®šä¹‰çš„ `ChatClient`ï¼š

```java
package com.example.chatclient.controller;

import org.springframework.ai.chat.client.ChatClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class ChatController {

    private final ChatClient customChatClient; // æ³¨å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„ ChatClient

    public ChatController(ChatClient customChatClient) {
        this.customChatClient = customChatClient;
    }

    @GetMapping("/chat")
    public String chat(@RequestParam(value = "message", defaultValue = "ä½ å¥½ï¼ŒSpring AIï¼") String message) {
        String response = customChatClient.prompt()
                .user(message)
                .call()
                .content();
        return response;
    }
}
```

é€šè¿‡ `@Bean` é…ç½®ï¼Œä½ å¯ä»¥æ›´çµæ´»åœ°æ§åˆ¶ `ChatClient` çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä¾‹å¦‚è®¾ç½®é»˜è®¤çš„ç³»ç»Ÿæ¶ˆæ¯ã€è°ƒæ•´æ¨¡å‹å‚æ•°ç­‰ï¼Œè¿™ä¸ºåç»­çš„è¿›é˜¶é…ç½®æ‰“ä¸‹äº†åŸºç¡€ã€‚

### 1.5 å°ç»“ä¸å±•æœ›

åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬åˆæ­¥äº†è§£äº† Spring AI çš„å®šä½ã€ä¼˜åŠ¿ä»¥åŠå®ƒä¸ LangChain ç­‰æ¡†æ¶çš„åŒºåˆ«ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬äº²æ‰‹æ­å»ºå¹¶è¿è¡Œäº†ç¬¬ä¸€ä¸ª Spring AI åº”ç”¨ï¼Œä½“éªŒäº†ä¸ DeepSeek æ¨¡å‹å¯¹è¯çš„ä¹è¶£ã€‚

ä½ å¯èƒ½å·²ç»å‘ç°ï¼ŒSpring AI çš„è®¾è®¡å“²å­¦å°±æ˜¯"ç®€å•è€Œå¼ºå¤§"ã€‚å®ƒå°†å¤æ‚çš„ AI æ¨¡å‹äº¤äº’å°è£…åœ¨ç®€æ´çš„ API èƒŒåï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯åº•å±‚ç»†èŠ‚ã€‚

åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†é€æ­¥æ·±å…¥ Spring AI çš„å„ä¸ªæ ¸å¿ƒç»„ä»¶ï¼ŒåŒ…æ‹¬ Prompt å·¥ç¨‹ã€æ¨¡å‹é›†æˆä¸è°ƒä¼˜ã€Chat Memoryã€Tool Calling ç­‰ï¼Œå¸®åŠ©ä½ æ„å»ºæ›´æ™ºèƒ½ã€æ›´å¼ºå¤§çš„ AI åº”ç”¨ã€‚

æ•¬è¯·æœŸå¾…ä¸‹ä¸€ç¯‡ï¼šã€ŠPrompt å·¥ç¨‹åŸºç¡€ï¼šä¸ AI é«˜æ•ˆå¯¹è¯çš„è‰ºæœ¯ã€‹ï¼